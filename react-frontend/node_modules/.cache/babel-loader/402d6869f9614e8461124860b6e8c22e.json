{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/src/OAuth.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport FontAwesome from 'react-fontawesome';\nimport { API_URL } from './config';\nexport default class OAuth extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: {},\n      disabled: ''\n    };\n\n    this.startAuth = () => {\n      if (!this.state.disabled) {\n        this.popup = this.openPopup();\n        this.checkPopup();\n        this.setState({\n          disabled: 'disabled'\n        });\n      }\n    };\n\n    this.closeCard = () => {\n      this.setState({\n        user: {}\n      });\n    };\n  }\n\n  componentDidMount() {\n    const _this$props = this.props,\n          socket = _this$props.socket,\n          provider = _this$props.provider;\n    socket.on(provider, user => {\n      this.popup.close();\n      this.setState({\n        user\n      });\n    });\n  }\n\n  checkPopup() {\n    const check = setInterval(() => {\n      const popup = this.popup;\n\n      if (!popup || popup.closed || popup.closed === undefined) {\n        clearInterval(check);\n        this.setState({\n          disabled: ''\n        });\n      }\n    }, 1000);\n  }\n\n  openPopup() {\n    const _this$props2 = this.props,\n          provider = _this$props2.provider,\n          socket = _this$props2.socket;\n    const width = 600,\n          height = 600;\n    const left = window.innerWidth / 2 - width / 2;\n    const top = window.innerHeight / 2 - height / 2;\n    const url = `${API_URL}/${provider}?socketId=${socket.id}`;\n    return window.open(url, '', `toolbar=no, location=no, directories=no, status=no, menubar=no, \n      scrollbars=no, resizable=no, copyhistory=no, width=${width}, \n      height=${height}, top=${top}, left=${left}`);\n  }\n\n  render() {\n    const _this$state$user = this.state.user,\n          name = _this$state$user.name,\n          photo = _this$state$user.photo;\n    const provider = this.props.provider;\n    const disabled = this.state.disabled;\n    const atSymbol = provider === 'twitter' ? '@' : '';\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, name ? React.createElement(\"div\", {\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: photo,\n      alt: name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }), React.createElement(FontAwesome, {\n      name: \"times-circle\",\n      className: \"close\",\n      onClick: this.closeCard,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, `${atSymbol}${name}`)) : React.createElement(\"div\", {\n      className: \"button-wrapper fadein-fast\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.startAuth,\n      className: `${provider} ${disabled} button`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(FontAwesome, {\n      name: provider,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }))));\n  }\n\n}\nOAuth.propTypes = {\n  provider: PropTypes.string.isRequired,\n  socket: PropTypes.object.isRequired\n};","map":{"version":3,"sources":["/usr/src/app/src/OAuth.js"],"names":["React","Component","PropTypes","FontAwesome","API_URL","OAuth","state","user","disabled","startAuth","popup","openPopup","checkPopup","setState","closeCard","componentDidMount","props","socket","provider","on","close","check","setInterval","closed","undefined","clearInterval","width","height","left","window","innerWidth","top","innerHeight","url","id","open","render","name","photo","atSymbol","propTypes","string","isRequired","object"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport FontAwesome from 'react-fontawesome'\nimport { API_URL } from './config'\n\nexport default class OAuth extends Component {\n\n    state = {\n        user: {},\n        disabled: ''\n    }\n\n    componentDidMount() {\n        const { socket, provider } = this.props\n\n        socket.on(provider, user => {\n            this.popup.close()\n            this.setState({user})\n        })\n    }\n\n    checkPopup() {\n        const check = setInterval(() => {\n            const { popup } = this\n            if (!popup || popup.closed || popup.closed === undefined) {\n                clearInterval(check)\n                this.setState({ disabled: ''})\n            }\n        }, 1000)\n    }\n\n    openPopup() {\n        const { provider, socket } = this.props\n        const width = 600, height = 600\n        const left = (window.innerWidth / 2) - (width / 2)\n        const top = (window.innerHeight / 2) - (height / 2)\n        const url = `${API_URL}/${provider}?socketId=${socket.id}`\n\n        return window.open(url, '',\n            `toolbar=no, location=no, directories=no, status=no, menubar=no, \n      scrollbars=no, resizable=no, copyhistory=no, width=${width}, \n      height=${height}, top=${top}, left=${left}`\n        )\n    }\n\n    startAuth = () => {\n        if (!this.state.disabled) {\n            this.popup = this.openPopup()\n            this.checkPopup()\n            this.setState({disabled: 'disabled'})\n        }\n    }\n\n    closeCard = () => {\n        this.setState({user: {}})\n    }\n\n    render() {\n        const { name, photo} = this.state.user\n        const { provider } = this.props\n        const { disabled } = this.state\n        const atSymbol = provider === 'twitter' ? '@' : ''\n\n        return (\n            <div>\n                {name\n                    ? <div className='card'>\n                        <img src={photo} alt={name} />\n                        <FontAwesome\n                            name='times-circle'\n                            className='close'\n                            onClick={this.closeCard}\n                        />\n                        <h4>{`${atSymbol}${name}`}</h4>\n                    </div>\n                    : <div className='button-wrapper fadein-fast'>\n                        <button\n                            onClick={this.startAuth}\n                            className={`${provider} ${disabled} button`}\n                        >\n                            <FontAwesome\n                                name={provider}\n                            />\n                        </button>\n                    </div>\n                }\n            </div>\n        )\n    }\n}\n\nOAuth.propTypes = {\n    provider: PropTypes.string.isRequired,\n    socket: PropTypes.object.isRequired\n}"]},"metadata":{},"sourceType":"module"}