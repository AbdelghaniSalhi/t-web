{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/src/Google.js\";\nimport React, { Component } from 'react'; //Assets\n\nimport google from './google.png';\nimport axios from 'axios';\nimport config from './config';\n\nclass GoogleLogin extends Component {\n  constructor(props) {\n    super(props);\n\n    this.googleLogin = () => {\n      window.gapi.auth.signIn({\n        callback: function (authResponse) {\n          this.googleSignInCallback(authResponse);\n        }.bind(this),\n        clientid: config.google,\n        //Google client Id\n        cookiepolicy: \"single_host_origin\",\n        requestvisibleactions: \"http://schema.org/AddAction\",\n        scope: \"https://www.googleapis.com/auth/plus.login email\"\n      });\n    };\n\n    this.googleSignInCallback = e => {\n      console.log(e);\n\n      if (e[\"status\"][\"signed_in\"]) {\n        window.gapi.client.load(\"plus\", \"v1\", function () {\n          if (e[\"access_token\"]) {\n            this.getUserGoogleProfile(e[\"access_token\"]);\n          } else if (e[\"error\"]) {//console.log('Import error', 'Error occured while importing data')\n          }\n        }.bind(this));\n      } else {//console.log('Oops... Error occured while importing data')\n      }\n    };\n\n    this.getUserGoogleProfile = accesstoken => {\n      var e = window.gapi.client.plus.people.get({\n        userId: \"me\"\n      });\n      e.execute(function (e) {\n        if (e.error) {\n          //console.log(e.message);\n          //console.log('Import error - Error occured while importing data')\n          return;\n        } else if (e.id) {\n          //Profile data\n          console.log(e.displayName);\n          console.log({\n            email: e.emails[0].value,\n            username: e.displayName\n          });\n          axios.post(\"http://localhost:6200/users/authGoogle\", {\n            email: e.emails[0].value,\n            username: e.displayName\n          }).then(response => {\n            console.log(response.data.token);\n            localStorage.setItem(\"auth-token\", response.data.token);\n            window.location.replace(\"/AjouterCrypto\");\n          }).catch(err => {\n            alert(err.message);\n          });\n        }\n      }.bind(this));\n    };\n  }\n\n  componentDidMount() {\n    (function () {\n      var e = document.createElement(\"script\");\n      e.type = \"text/javascript\";\n      e.async = true;\n      e.src = \"https://apis.google.com/js/client:platform.js?onload=gPOnLoad\";\n      var t = document.getElementsByTagName(\"script\")[0];\n      t.parentNode.insertBefore(e, t);\n    })();\n  } //Triggering login for google\n\n\n  render() {\n    return React.createElement(\"img\", {\n      src: google,\n      style: {\n        width: '120%',\n        position: 'relative',\n        top: '-0px',\n        left: '140px'\n      },\n      title: \"google login\",\n      alt: \"google\",\n      onClick: () => this.googleLogin(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default GoogleLogin;","map":{"version":3,"sources":["/usr/src/app/src/Google.js"],"names":["React","Component","google","axios","config","GoogleLogin","constructor","props","googleLogin","window","gapi","auth","signIn","callback","authResponse","googleSignInCallback","bind","clientid","cookiepolicy","requestvisibleactions","scope","e","console","log","client","load","getUserGoogleProfile","accesstoken","plus","people","get","userId","execute","error","id","displayName","email","emails","value","username","post","then","response","data","token","localStorage","setItem","location","replace","catch","err","alert","message","componentDidMount","document","createElement","type","async","src","t","getElementsByTagName","parentNode","insertBefore","render","width","position","top","left"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\n//Assets\nimport google from './google.png'\nimport axios from 'axios';\nimport config from './config';\n\nclass GoogleLogin extends Component{\n    constructor(props) {\n        super(props)\n    }\n    \n    componentDidMount(){\n        (function() {\n            var e = document.createElement(\"script\");\n            e.type = \"text/javascript\";\n            e.async = true;\n            e.src = \"https://apis.google.com/js/client:platform.js?onload=gPOnLoad\";\n            var t = document.getElementsByTagName(\"script\")[0];\n            t.parentNode.insertBefore(e, t)\n        })();    \n    }\n    \n    //Triggering login for google\n    googleLogin = () => {\n        window.gapi.auth.signIn({\n            callback: function(authResponse) {\n                this.googleSignInCallback( authResponse )\n            }.bind( this ),\n            clientid: config.google, //Google client Id\n            cookiepolicy: \"single_host_origin\",\n            requestvisibleactions: \"http://schema.org/AddAction\",\n            scope: \"https://www.googleapis.com/auth/plus.login email\"\n        });\n    }\n    \n    googleSignInCallback = (e) => {\n        console.log( e )\n        if (e[\"status\"][\"signed_in\"]) {\n            window.gapi.client.load(\"plus\", \"v1\", function() {\n                if (e[\"access_token\"]) {\n                    this.getUserGoogleProfile( e[\"access_token\"] )\n                } else if (e[\"error\"]) {\n                    //console.log('Import error', 'Error occured while importing data')\n                }\n            }.bind(this));\n        } else {\n            //console.log('Oops... Error occured while importing data')\n        }\n    }\n\n    getUserGoogleProfile = accesstoken => {\n        var e = window.gapi.client.plus.people.get({\n            userId: \"me\"\n        });\n        e.execute(function(e) {\n            if (e.error) {\n                //console.log(e.message);\n                //console.log('Import error - Error occured while importing data')\n                return\n            \n            } else if (e.id) {\n                //Profile data\n                console.log( e.displayName );\n                console.log({email : e.emails[0].value, username : e.displayName});\n                axios.post(\"http://localhost:6200/users/authGoogle\", {email : e.emails[0].value, username : e.displayName})\n                    .then (response =>{\n                        console.log(response.data.token)\n                        localStorage.setItem(\"auth-token\", response.data.token)\n                        window.location.replace(\"/AjouterCrypto\")\n                    }).catch(err =>{\n                        alert(err.message)\n                })\n            }\n        }.bind(this));\n    }\n    \n    render(){\n        return(\n            <img src={google} style={{width: '120%',position:'relative',top:'-0px',left:'140px'}} title=\"google login\" alt=\"google\" onClick={ () => this.googleLogin() }/>\n        )\n    }\n}\n\nexport default GoogleLogin;"]},"metadata":{},"sourceType":"module"}