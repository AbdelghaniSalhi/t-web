{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/src/Google.js\";\nimport React, { Component } from 'react'; //Assets\n\nimport google from './google.png';\nimport config from './config';\n\nclass GoogleLogin extends Component {\n  constructor(props) {\n    super(props);\n\n    this.googleLogin = () => {\n      let response = null;\n      window.gapi.auth.signIn({\n        callback: function (authResponse) {\n          this.googleSignInCallback(authResponse);\n        }.bind(this),\n        clientid: config.google,\n        //Google client Id\n        cookiepolicy: \"single_host_origin\",\n        requestvisibleactions: \"http://schema.org/AddAction\",\n        scope: \"https://www.googleapis.com/auth/plus.login email\"\n      });\n    };\n\n    this.googleSignInCallback = e => {\n      console.log(e);\n\n      if (e[\"status\"][\"signed_in\"]) {\n        window.gapi.client.load(\"plus\", \"v1\", function () {\n          if (e[\"access_token\"]) {\n            this.getUserGoogleProfile(e[\"access_token\"]);\n          } else if (e[\"error\"]) {//console.log('Import error', 'Error occured while importing data')\n          }\n        }.bind(this));\n      } else {//console.log('Oops... Error occured while importing data')\n      }\n    };\n\n    this.getUserGoogleProfile = accesstoken => {\n      var e = window.gapi.client.plus.people.get({\n        userId: \"me\"\n      });\n      e.execute(function (e) {\n        if (e.error) {\n          //console.log(e.message);\n          //console.log('Import error - Error occured while importing data')\n          return;\n        } else if (e.id) {\n          //Profile data\n          console.log(e.displayName);\n          console.log(e.emails[0].value);\n          axios.post(\"http://6200/authGoogle\", {\n            email: e.emails[0].value,\n            username: e.displayName\n          }).then(response => {\n            localStorage.setItem(\"auth-token\", response.data.token);\n            console.log(localStorage.getItem(\"auth-tokens\"));\n          });\n          return;\n        }\n      }.bind(this));\n    };\n  }\n\n  componentDidMount() {\n    (function () {\n      var e = document.createElement(\"script\");\n      e.type = \"text/javascript\";\n      e.async = true;\n      e.src = \"https://apis.google.com/js/client:platform.js?onload=gPOnLoad\";\n      var t = document.getElementsByTagName(\"script\")[0];\n      t.parentNode.insertBefore(e, t);\n    })();\n  } //Triggering login for google\n\n\n  render() {\n    return React.createElement(\"img\", {\n      src: google,\n      style: {\n        width: '180%',\n        position: 'relative',\n        top: '60px'\n      },\n      title: \"google login\",\n      alt: \"google\",\n      onClick: () => this.googleLogin(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default GoogleLogin;","map":{"version":3,"sources":["/usr/src/app/src/Google.js"],"names":["React","Component","google","config","GoogleLogin","constructor","props","googleLogin","response","window","gapi","auth","signIn","callback","authResponse","googleSignInCallback","bind","clientid","cookiepolicy","requestvisibleactions","scope","e","console","log","client","load","getUserGoogleProfile","accesstoken","plus","people","get","userId","execute","error","id","displayName","emails","value","axios","post","email","username","then","localStorage","setItem","data","token","getItem","componentDidMount","document","createElement","type","async","src","t","getElementsByTagName","parentNode","insertBefore","render","width","position","top"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\n//Assets\nimport google from './google.png'\n\nimport config from './config';\n\nclass GoogleLogin extends Component{\n    constructor(props) {\n        super(props)\n    }\n    \n    componentDidMount(){\n        (function() {\n            var e = document.createElement(\"script\");\n            e.type = \"text/javascript\";\n            e.async = true;\n            e.src = \"https://apis.google.com/js/client:platform.js?onload=gPOnLoad\";\n            var t = document.getElementsByTagName(\"script\")[0];\n            t.parentNode.insertBefore(e, t)\n        })();    \n    }\n    \n    //Triggering login for google\n    googleLogin = () => {\n        let response = null;\n        window.gapi.auth.signIn({\n            callback: function(authResponse) {\n                this.googleSignInCallback( authResponse )\n            }.bind( this ),\n            clientid: config.google, //Google client Id\n            cookiepolicy: \"single_host_origin\",\n            requestvisibleactions: \"http://schema.org/AddAction\",\n            scope: \"https://www.googleapis.com/auth/plus.login email\"\n        });\n    }\n    \n    googleSignInCallback = (e) => {\n        console.log( e )\n        if (e[\"status\"][\"signed_in\"]) {\n            window.gapi.client.load(\"plus\", \"v1\", function() {\n                if (e[\"access_token\"]) {\n                    this.getUserGoogleProfile( e[\"access_token\"] )\n                } else if (e[\"error\"]) {\n                    //console.log('Import error', 'Error occured while importing data')\n                }\n            }.bind(this));\n        } else {\n            //console.log('Oops... Error occured while importing data')\n        }\n    }\n\n    getUserGoogleProfile = accesstoken => {\n        var e = window.gapi.client.plus.people.get({\n            userId: \"me\"\n        });\n        e.execute(function(e) {\n            if (e.error) {\n                //console.log(e.message);\n                //console.log('Import error - Error occured while importing data')\n                return\n            \n            } else if (e.id) {\n                //Profile data\n                console.log( e.displayName );\n                console.log( e.emails[0].value);\n                axios.post(\"http://6200/authGoogle\", {email : e.emails[0].value, username : e.displayName})\n                    .then (response =>{\n                        localStorage.setItem(\"auth-token\", response.data.token)\n                        console.log(localStorage.getItem(\"auth-tokens\"))\n                    })\n                return;\n            }\n        }.bind(this));\n    }\n    \n    render(){\n        return(\n            <img src={google} style={{width: '180%',position:'relative',top:'60px'}} title=\"google login\" alt=\"google\" onClick={ () => this.googleLogin() }/>\n        )\n    }\n}\n\nexport default GoogleLogin;"]},"metadata":{},"sourceType":"module"}